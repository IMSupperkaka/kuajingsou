(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{JAxp:function(e,t,a){e.exports={login:"antd-pro-components-login-index-login",getCaptcha:"antd-pro-components-login-index-getCaptcha",icon:"antd-pro-components-login-index-icon",other:"antd-pro-components-login-index-other",register:"antd-pro-components-login-index-register",prefixIcon:"antd-pro-components-login-index-prefixIcon",submit:"antd-pro-components-login-index-submit"}},Y5yc:function(e,t,a){"use strict";a.r(t);var n=a("2Taf"),r=a.n(n),o=a("vZ4D"),i=a.n(o),s=a("l4Ni"),c=a.n(s),l=a("ujKo"),p=a.n(l),u=a("MhPg"),m=a.n(u),d=a("q1tI"),h=a.n(d),f=a("MuoO"),g=(a("y8nQ"),a("Vl3Y")),v=(a("17x9"),a("TSYQ")),b=a.n(v),C=(a("14J3"),a("BMrR")),x=(a("+L6B"),a("2/Rp")),E=(a("jCWc"),a("kPKH")),y=(a("5NDa"),a("5rEg")),w=a("jehZ"),S=a.n(w),N=a("Y/ft"),I=a.n(N),P=a("BGR+"),k=a("JAxp"),D=a.n(k),T=(a("Pwec"),a("CtXQ")),q={UserName:{props:{size:"large",id:"username",prefix:h.a.createElement(T["a"],{type:"user",className:D.a.prefixIcon}),placeholder:"admin"},rules:[{required:!0,message:"Please enter username!"}]},Password:{props:{size:"large",prefix:h.a.createElement(T["a"],{type:"lock",className:D.a.prefixIcon}),type:"password",id:"password",placeholder:"888888"},rules:[{required:!0,message:"Please enter password!"}]},Mobile:{props:{size:"large",prefix:h.a.createElement(T["a"],{type:"mobile",className:D.a.prefixIcon}),placeholder:"mobile number"},rules:[{required:!0,message:"Please enter mobile number!"},{pattern:/^1\d{10}$/,message:"Wrong mobile number format!"}]},Captcha:{props:{size:"large",prefix:h.a.createElement(T["a"],{type:"mail",className:D.a.prefixIcon}),placeholder:"captcha"},rules:[{required:!0,message:"Please enter Captcha!"}]}},F=Object(d["createContext"])(),j=F,G=g["a"].Item,O=function(e){function t(e){var a;return r()(this,t),a=c()(this,p()(t).call(this,e)),a.onGetCaptcha=function(){var e=a.props.onGetCaptcha,t=e?e():null;!1!==t&&(t instanceof Promise?t.then(a.runGetCaptchaCountDown):a.runGetCaptchaCountDown())},a.getFormItemOptions=function(e){var t=e.onChange,a=e.defaultValue,n=e.customprops,r=e.rules,o={rules:r||n.rules};return t&&(o.onChange=t),a&&(o.initialValue=a),o},a.runGetCaptchaCountDown=function(){var e=a.props.countDown,t=e||59;a.setState({count:t}),a.interval=setInterval(function(){t-=1,a.setState({count:t}),0===t&&clearInterval(a.interval)},1e3)},a.state={count:0},a}return m()(t,e),i()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.updateActive,a=e.name;t&&t(a)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.state.count,t=this.props.form.getFieldDecorator,a=this.props,n=(a.onChange,a.customprops),r=(a.defaultValue,a.rules,a.name),o=a.getCaptchaButtonText,i=a.getCaptchaSecondText,s=(a.updateActive,a.type),c=I()(a,["onChange","customprops","defaultValue","rules","name","getCaptchaButtonText","getCaptchaSecondText","updateActive","type"]),l=this.getFormItemOptions(this.props),p=c||{};if("Captcha"===s){var u=Object(P["a"])(p,["onGetCaptcha","countDown"]);return h.a.createElement(G,null,h.a.createElement(C["a"],{gutter:8},h.a.createElement(E["a"],{span:16},t(r,l)(h.a.createElement(y["a"],S()({},n,u)))),h.a.createElement(E["a"],{span:8},h.a.createElement(x["a"],{disabled:e,className:D.a.getCaptcha,size:"large",onClick:this.onGetCaptcha},e?"".concat(e," ").concat(i):o))))}return h.a.createElement(G,null,t(r,l)(h.a.createElement(y["a"],S()({},n,p))))}}]),t}(d["Component"]);O.defaultProps={getCaptchaButtonText:"captcha",getCaptchaSecondText:"second"};var A={};Object.keys(q).forEach(function(e){var t=q[e];A[e]=function(a){return h.a.createElement(j.Consumer,null,function(n){return h.a.createElement(O,S()({customprops:t.props,rules:t.rules},a,{type:e,updateActive:n.updateActive,form:n.form}))})}});var V=A,z=g["a"].Item,B=function(e){var t=e.className,a=I()(e,["className"]),n=b()(D.a.submit,t);return h.a.createElement(z,null,h.a.createElement(x["a"],S()({size:"large",className:n,type:"primary",htmlType:"submit"},a)))},M=B,J=function(e){function t(e){var a;return r()(this,t),a=c()(this,p()(t).call(this,e)),a.getContext=function(){var e=a.props.form;return{form:e}},a.handleSubmit=function(e){e.preventDefault();var t=a.props.form;t.validateFields({force:!0},function(e,t){e||a.props.onSubmit()})},a.state={captcha:{instance:null}},a}return m()(t,e),i()(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.children,n=[];return h.a.Children.forEach(a,function(e){e&&n.push(e)}),h.a.createElement(j.Provider,{value:this.getContext()},h.a.createElement("div",{className:b()(t,D.a.login)},h.a.createElement(g["a"],{onSubmit:this.handleSubmit},a)),h.a.createElement("div",{id:"captcha"}))}}]),t}(d["Component"]);J.defaultProps={className:"",onSubmit:function(){}},J.Submit=M,Object.keys(V).forEach(function(e){J[e]=V[e]});var R,U,Y,Q=g["a"].create()(J),W=a("w2qy"),K=a.n(W),Z=Q.UserName,H=Q.Password,L=Q.Submit,X=(R=Object(f["connect"])(function(e){var t=e.login,a=e.loading;return{login:t,submitting:a.effects["login/login"]}}),R((Y=function(e){function t(e){var a;return r()(this,t),a=c()(this,p()(t).call(this,e)),a.handleSubmit=function(e){a.state.captcha.instance.popUp()},a.state={captcha:{instance:null}},a}return m()(t,e),i()(t,[{key:"componentDidMount",value:function(){var e=this;initNECaptcha({captchaId:"e227d67e571b440681fbbfdc866ab3ab",mode:"popup",element:"#captcha",width:"550px",protocol:"https",onClose:function(t){e.state.captcha.instance.refresh()},onVerify:function(t,a){if(!t){var n=e.loginForm.props.form.getFieldsValue(),r=n.username,o=n.password;setTimeout(function(){e.props.dispatch({type:"login/login",payload:{username:r,password:o,validate:a.validate,captchaId:"e227d67e571b440681fbbfdc866ab3ab"}})},500)}}},function(t){e.setState({captcha:{instance:t}})})}},{key:"render",value:function(){var e=this,t=this.props,a=(t.login,t.submitting);return h.a.createElement("div",{className:K.a.main},h.a.createElement(Q,{onSubmit:this.handleSubmit,wrappedComponentRef:function(t){e.loginForm=t}},h.a.createElement(Z,{name:"username",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d!"}]}),h.a.createElement(H,{name:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801!"}],onPressEnter:function(t){t.preventDefault(),e.loginForm.props.form.validateFields(e.handleSubmit)}}),h.a.createElement(L,{loading:a},"\u767b\u5f55")))}}]),t}(d["Component"]),U=Y))||U);t["default"]=X},w2qy:function(e,t,a){e.exports={main:"antd-pro-pages-user-login-main",icon:"antd-pro-pages-user-login-icon",other:"antd-pro-pages-user-login-other",register:"antd-pro-pages-user-login-register"}}}]);